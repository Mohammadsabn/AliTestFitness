<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OEM Spares & Parts - Ali Fitness Services</title>
    
    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles (Matching Dark Theme) -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');
        
        /* Custom Colors & Variables */
        :root {
            --bg-deep-dark: #0a0a0a;
            --text-light: #eeeeee;
            --accent-blue: #00ffff;
            --border-gray: #333333;
            --primary-glow: rgba(0, 255, 255, 0.7);
        }

        body {
            background-color: var(--bg-deep-dark);
            color: var(--text-light);
            font-family: 'Poppins', sans-serif;
        }

        /* Header Styling (Matching Index Page) */
        header {
            background-color: rgba(10, 10, 10, 0.95);
            border-bottom: 1px solid var(--border-gray);
            box-shadow: 0 0 10px var(--primary-glow);
            z-index: 20;
        }

        .brand-name {
            color: var(--accent-blue);
            text-shadow: 0 0 5px var(--primary-glow);
        }

        /* Product Cards */
        .product-card {
            background-color: #121212;
            border: 1px solid var(--border-gray);
            transition: all 0.3s;
            height: 100%; /* Ensure uniform height */
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            border-color: var(--accent-blue);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            transform: translateY(-5px);
        }

        /* Action Buttons */
        .btn-primary {
            background-color: var(--accent-blue);
            color: #000;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .btn-primary:hover {
            background-color: #fff;
        }
        
        .btn-whatsapp {
            background-color: #25D366;
            color: #fff;
        }
        .btn-whatsapp:hover {
            background-color: #128C7E;
        }
        
        .btn-call {
            background-color: #3B82F6;
            color: #fff;
        }
        .btn-call:hover {
            background-color: #1E40AF;
        }

        .filter-section input, .filter-section select {
            background-color: #1f1f1f;
            border: 1px solid var(--border-gray);
            color: var(--text-light);
        }
        
        .filter-section input:focus, .filter-section select:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.3);
        }

        /* Utility for Highlight */
        .highlight {
            color: var(--accent-blue);
            text-shadow: 0 0 5px var(--primary-glow);
        }

        /* Shopping Cart Modal Styles */
        .cart-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 30;
            animation: fadeIn 0.3s ease-out;
        }

        .cart-modal-content {
            background-color: #0a0a0a;
            border: 2px solid var(--accent-blue);
            border-radius: 1rem;
            max-width: 90%;
            width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease-out;
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.5);
        }
        
        /* Cart Icon Animation */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 255, 255, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 255, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 255, 255, 0); }
        }
        
        /* CART POSITION: BOTTOM RIGHT */
        .cart-icon-container {
            position: fixed;
            bottom: 20px; 
            right: 20px;
            z-index: 25;
        }

        .cart-pulse {
            animation: pulse 1s infinite;
        }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>
</head>
<body class="min-h-screen">

    <!-- Header (Simple Navbar) -->
    <header class="shadow-lg sticky top-0">
        <div class="container mx-auto flex justify-between items-center py-4 px-4">
            <a href="index.html" class="brand-name text-2xl font-extrabold tracking-wider uppercase flex items-center">
                <i class="fas fa-dumbbell mr-2"></i> ALI FITNESS SERVICES
            </a>
            <nav class="space-x-6 hidden md:block">
                <a href="index.html#home" class="text-white hover:text-cyan-400 transition">Home</a>
                <a href="index.html#services" class="text-white hover:text-cyan-400 transition">Services</a>
                <a href="index.html#contact" class="px-4 py-2 rounded-lg btn-primary text-sm font-semibold uppercase">Contact Us</a>
            </nav>
        </div>
    </header>

    <!-- Floating Cart Icon (Bottom Right) -->
    <div id="cart-icon-container" class="cart-icon-container">
        <button id="open-cart-btn" class="relative bg-cyan-500 text-black p-4 rounded-full shadow-lg hover:bg-white transition duration-200">
            <i class="fas fa-shopping-cart text-xl"></i>
            <span id="cart-count" class="absolute top-0 right-0 transform translate-x-1/4 -translate-y-1/4 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
        </button>
    </div>

    <main class="py-12">
        <div class="container mx-auto px-4">
            
            <!-- Hero Header for Products -->
            <div class="text-center mb-12">
                <h1 class="text-5xl font-extrabold mb-4 uppercase highlight">
                    OEM SPARE PARTS CATALOG
                </h1>
                <p class="text-xl text-gray-400 max-w-3xl mx-auto">
                    Search original, certified replacement parts for all major commercial fitness equipment brands. <span class="highlight">Guaranteed compatibility.</span>
                </p>
            </div>
            
            <!-- Search & Filter Section -->
            <div class="filter-section bg-[#121212] p-6 rounded-xl shadow-2xl mb-10 border border-gray-700">
                <div class="flex flex-col md:flex-row gap-4 items-center">
                    
                    <!-- Search Bar -->
                    <div class="flex-grow w-full">
                        <div class="relative">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="text" id="search-input" placeholder="Search by Part Name or Model (e.g., Treadmill Belt, PCB 8800)" 
                                class="w-full pl-10 pr-4 py-3 rounded-lg focus:outline-none text-sm"/>
                        </div>
                    </div>
                    
                    <!-- Filter 1: Equipment Type -->
                    <select id="filter-equipment" class="py-3 px-4 rounded-lg text-sm w-full md:w-auto">
                        <option value="all">All Equipment Types</option>
                        <option value="treadmill">Treadmill</option>
                        <option value="elliptical">Elliptical</option>
                        <option value="bike">Exercise Bike</option>
                        <option value="multi-gym">Multi-Gym/Strength</option>
                    </select>

                    <!-- Filter 2: Brand -->
                    <select id="filter-brand" class="py-3 px-4 rounded-lg text-sm w-full md:w-auto">
                        <option value="all">All Brands</option>
                        <option value="precor">Precor</option>
                        <option value="life-fitness">Life Fitness</option>
                        <option value="technogym">Technogym</option>
                        <option value="other">Other OEM</option>
                    </select>
                </div>
            </div>

            <!-- Product Grid - RENDERED DYNAMICALLY -->
            <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Products will be injected here by JavaScript -->
                <p id="no-results-message" class="col-span-full text-center text-gray-400 hidden">
                    No products found matching your search and filter criteria.
                </p>
            </div>
            
            <!-- Call to Action Footer -->
            <div class="mt-16 text-center border-t border-gray-800 pt-8">
                <h2 class="text-3xl font-bold mb-3">Can't find your part?</h2>
                <p class="text-gray-400 mb-6">
                    We source thousands of OEM spares. Contact our team directly with the machine model and part number.
                </p>
                <a href="index.html#contact" class="px-6 py-3 rounded-lg btn-primary font-bold text-lg uppercase transition">
                    <i class="fas fa-headset mr-2"></i> Request Special Sourcing
                </a>
            </div>

        </div>
    </main>
    
    <!-- Cart Modal Overlay -->
    <div id="cart-modal-overlay" class="cart-modal-overlay" style="display: none;">
        <div id="cart-modal-content" class="cart-modal-content">
            <div class="flex justify-between items-center border-b border-gray-700 p-6">
                <h2 class="text-3xl font-bold highlight">Your Cart</h2>
                <button id="close-cart-btn" class="text-gray-400 hover:text-white transition">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <div class="p-6">
                <!-- Cart Items List will be populated here -->
                <div id="cart-items-list" class="space-y-4 max-h-80 overflow-y-auto mb-6">
                    <!-- Dynamic cart items -->
                </div>

                <div id="cart-summary" class="bg-[#121212] p-4 rounded-lg border border-gray-700">
                    <div class="flex justify-between items-center text-lg font-semibold mb-2">
                        <span>Total Quantity:</span>
                        <span id="summary-qty" class="highlight">0</span>
                    </div>
                    <div class="flex justify-between items-center text-2xl font-extrabold border-t border-gray-800 pt-2">
                        <span>Total Amount:</span>
                        <span id="summary-total" class="highlight">â‚¹ 0</span>
                    </div>
                </div>

                <p id="empty-cart-message" class="text-center text-gray-500 py-4 hidden">
                    Your cart is empty. Add some spares to proceed!
                </p>
            </div>

            <div class="p-6 flex flex-col sm:flex-row gap-3 border-t border-gray-700">
                <button id="checkout-whatsapp-btn" class="w-full py-3 rounded-lg btn-whatsapp font-bold text-lg uppercase transition flex items-center justify-center space-x-2 disabled:opacity-50" disabled>
                    <i class="fab fa-whatsapp"></i> 
                    <span>Order via WhatsApp</span>
                </button>
                <a id="checkout-call-btn" href="tel:YOUR_PHONE_NUMBER" class="w-full py-3 rounded-lg btn-call font-bold text-lg uppercase transition flex items-center justify-center space-x-2 disabled:opacity-50" disabled>
                    <i class="fas fa-phone"></i> 
                    <span>Call to Order</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Footer (Simple) -->
    <footer class="bg-[#050505] text-center py-4 mt-12 border-t border-gray-800">
        <p class="text-gray-500 text-sm">&copy; 2025 Ali Fitness Services. All rights reserved.</p>
    </footer>

    <!-- Javascript for Dynamic Products, Search, Filter, and Cart Functionality -->
    <script>
        // --- STEP 1: APKA SIMPLIFIED INPUT DATA (SIRF VALUES) ---
        // Naye product add karne ke liye, sirf ek aur array of values neeche add karein.
        // Index: 0       1                            2       3            4               5                             6        7
        // Keys: [id,     name,                        price,  type,        brand,          img,                          hasDims, dimLabel]
        let simplifiedProductsData = [
            ['LF-TMB-101', "Treadmill Running Belt", 8500, "treadmill", "life-fitness", 'image/product/dumbele.jfif', true, 'L x W (mm)'],
            ['PR-INC-MTR-05', "Incline Motor Actuator", 15200, "treadmill", "precor", 'image/product/motor.jfif', false, ''],
            ['TG-ELL-LINK-01', "Elliptical Pedal Linkage", 6100, "elliptical", "technogym", 'image/product/sample_treadmill.jfif', false, ''],
            ['LF-PCB-C3-001', "Bike Console PCB", 22900, "bike", "life-fitness", 'image/product/console_pcb.jpg', false, ''],
            ['PR-DC-MTR-3HP', "DC Drive Motor (3HP)", 18000, "treadmill", "precor", 'image/product/motor.jfif', false, ''],
            ['TG-CBL-4MM', "Multi-Gym Cable (4mm)", 1500, "multi-gym", "technogym", 'image/product/sample_spring.jfif', true, 'Length (meters)'],
            
            // NAYA PRODUCT EXAMPLE: Aap sirf values add karein:
            ['NEW-CON-007', "LCD Console Display 15in", 35000, "treadmill", "other", 'image/product/new_console.jpg', false, '']
        ];
        
        // --- STEP 2: MAPPING FUNCTION (JO ARRAY KO OBJECT MEIN BADLEGA) ---
        function mapSimplifiedData(data) {
            // .map() function har item (inner array) par chalega
            return data.map(productArray => {
                // Array Destructuring: Array ki values ko unke position ke hisaab se naam deta hai
                const [
                    id, 
                    name, 
                    price, 
                    type, 
                    brand, 
                    img, 
                    hasDims, 
                    dimLabel
                ] = productArray;

                // Aur phir isko standard JavaScript Object format mein bhej deta hai
                return {
                    id,
                    name,
                    price,
                    type,
                    brand,
                    img,
                    partNo: id, // partNo ko id se set kiya (id hi part number hai)
                    hasDims,
                    dimLabel
                };
            });
        }
        
        // --- STEP 3: FINAL USABLE PRODUCT DATA ---
        // Ab productsData mein wohi object format hai jo Cart system ko chahiye.
        let productsData = mapSimplifiedData(simplifiedProductsData);
        let cartItems = JSON.parse(localStorage.getItem('aliFitnessCart')) || [];
        
        // --- DOM ELEMENTS (NO CHANGE) ---
        const searchInput = document.getElementById('search-input');
        const filterEquipment = document.getElementById('filter-equipment');
        const filterBrand = document.getElementById('filter-brand');
        const productList = document.getElementById('product-list');
        const cartModalOverlay = document.getElementById('cart-modal-overlay');
        const cartItemsList = document.getElementById('cart-items-list');
        const cartCount = document.getElementById('cart-count');
        const cartIconContainer = document.getElementById('cart-icon-container');
        const summaryQty = document.getElementById('summary-qty');
        const summaryTotal = document.getElementById('summary-total');
        const emptyCartMessage = document.getElementById('empty-cart-message');
        const checkoutWhatsappBtn = document.getElementById('checkout-whatsapp-btn');
        const checkoutCallBtn = document.getElementById('checkout-call-btn');

        // --- HELPER FUNCTIONS (NO CHANGE) ---

        // Saves cart state to local storage
        function saveCart() {
            localStorage.setItem('aliFitnessCart', JSON.stringify(cartItems));
            updateCartIcon();
            renderCart();
        }

        // Formats currency (Indian Rupees)
        const formatter = new Intl.NumberFormat('en-IN', {
            style: 'currency',
            currency: 'INR',
            minimumFractionDigits: 0
        });

        // --- CART LOGIC (NO CHANGE) ---

        function updateCartIcon() {
            const totalQty = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalQty;
            
            // Enable/Disable checkout buttons
            const isDisabled = totalQty === 0;
            checkoutWhatsappBtn.disabled = isDisabled;
            checkoutCallBtn.disabled = isDisabled;

            // Show/Hide empty message
            emptyCartMessage.classList.toggle('hidden', totalQty > 0);

            // Update footer link placeholder (For Call to Order)
            // FIXME: Replace YOUR_PHONE_NUMBER with actual number
            checkoutCallBtn.href = `tel:+918879731335`; 
        }

        function addToCart(productId) {
            const product = productsData.find(p => p.id === productId);
            const existingItem = cartItems.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cartItems.push({ 
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    quantity: 1,
                    // You can add more properties here like selected dimensions if needed
                });
            }
            
            // Cart Animation (Pulse Effect)
            cartIconContainer.classList.add('cart-pulse');
            setTimeout(() => {
                cartIconContainer.classList.remove('cart-pulse');
            }, 1000);

            saveCart();
        }

        function updateCartItem(productId, change) {
            const item = cartItems.find(i => i.id === productId);
            if (!item) return;

            item.quantity += change;

            if (item.quantity <= 0) {
                deleteCartItem(productId);
            } else {
                saveCart();
            }
        }

        function deleteCartItem(productId) {
            cartItems = cartItems.filter(item => item.id !== productId);
            saveCart();
        }

        function renderCart() {
            cartItemsList.innerHTML = '';
            let totalAmount = 0;
            let totalQuantity = 0;

            if (cartItems.length === 0) {
                summaryQty.textContent = '0';
                summaryTotal.textContent = formatter.format(0);
                emptyCartMessage.classList.remove('hidden');
                return;
            }

            emptyCartMessage.classList.add('hidden');

            cartItems.forEach(item => {
                const subtotal = item.price * item.quantity;
                totalAmount += subtotal;
                totalQuantity += item.quantity;

                const cartItemHtml = `
                    <div class="flex items-center justify-between bg-[#1f1f1f] p-3 rounded-lg border border-gray-700">
                        <div class="flex-1 min-w-0 mr-4">
                            <h4 class="font-semibold text-white truncate">${item.name}</h4>
                            <p class="text-sm text-gray-400">${item.id} - ${formatter.format(item.price)}</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <!-- Quantity Kam Karein -->
                            <button onclick="updateCartItem('${item.id}', -1)" class="bg-gray-600 text-white w-6 h-6 rounded-full hover:bg-gray-500 transition disabled:opacity-50" ${item.quantity <= 1 ? 'disabled' : ''}>
                                <i class="fas fa-minus text-xs"></i>
                            </button>
                            <!-- Quantity Display -->
                            <span class="font-bold w-6 text-center">${item.quantity}</span>
                            <!-- Quantity Zyada Karein -->
                            <button onclick="updateCartItem('${item.id}', 1)" class="bg-cyan-500 text-black w-6 h-6 rounded-full hover:bg-white transition">
                                <i class="fas fa-plus text-xs"></i>
                            </button>
                        </div>
                        <div class="ml-4 text-right">
                            <span class="font-bold text-lg">${formatter.format(subtotal)}</span>
                            <!-- Item Delete Karein -->
                            <button onclick="deleteCartItem('${item.id}')" class="ml-2 text-red-500 hover:text-red-400">
                                <i class="fas fa-trash-alt text-sm"></i>
                            </button>
                        </div>
                    </div>
                `;
                cartItemsList.insertAdjacentHTML('beforeend', cartItemHtml);
            });

            summaryQty.textContent = totalQuantity;
            summaryTotal.textContent = formatter.format(totalAmount);
        }

        function generateWhatsAppMessage() {
            let message = "Hello Ali Fitness Services,\n\nI would like to place an order for the following spare parts:\n\n";
            let totalAmount = 0;

            cartItems.forEach((item, index) => {
                const subtotal = item.price * item.quantity;
                totalAmount += subtotal;
                
                message += `${index + 1}. ${item.name}\n   - Part ID: ${item.id}\n   - Quantity: ${item.quantity}\n   - Subtotal: ${formatter.format(subtotal)}\n`;
            });

            message += `\n---\nTotal Order Value: ${formatter.format(totalAmount)}`;
            message += "\n\nPlease confirm availability and payment details.";
            
            // FIXME: Replace YOUR_WHATSAPP_NUMBER with actual number
            const whatsappNumber = "918879731335"; 
            const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            
            window.open(url, '_blank');
        }


        // --- PRODUCT RENDERING & FILTERING (USES productsData OBJECTS) ---

        function renderProducts(filteredProducts) {
            productList.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                 productList.innerHTML = `
                    <p id="no-results-message" class="col-span-full text-center text-gray-400 py-10">
                        Koi bhi product aapki khoj se match nahi kar raha hai.
                    </p>
                `;
                return;
            }

            filteredProducts.forEach(product => {
                const cardHTML = `
                    <div class="product-card p-6 rounded-xl text-center" data-type="${product.type}" data-brand="${product.brand}">
                        <!-- Image Container -->
                        <div class="h-32 bg-gray-800 rounded-lg flex items-center justify-center mb-4 overflow-hidden border border-gray-700">
                            <img 
                                src="${product.img}" 
                                alt="${product.name}" 
                                class="w-full h-full object-cover p-4"
                                onerror="this.style.display='none'; this.parentNode.innerHTML = '<i class=\'fas fa-microchip text-5xl text-gray-600\'></i>';"
                            >
                        </div>
                        
                        <!-- Details -->
                        <div class="flex-grow">
                            <h3 class="text-xl font-semibold highlight mb-2">${product.name}</h3>
                            <p class="text-sm text-gray-400 mb-3">${product.brand.toUpperCase()} - Part ID: ${product.partNo}</p>
                            
                            ${product.hasDims ? `<p class="text-xs text-yellow-400 mb-2">Note: Order karte samay ${product.dimLabel} mention karein.</p>` : ''}
                        </div>

                        <!-- Price & Action -->
                        <div class="mt-auto pt-3">
                            <p class="text-3xl font-bold text-white mb-4">${formatter.format(product.price)}</p>
                            <button onclick="addToCart('${product.id}')" class="w-full py-2 rounded-lg btn-primary font-bold text-sm uppercase transition flex items-center justify-center space-x-2">
                                <i class="fas fa-cart-plus"></i> 
                                <span class="font-semibold">ADD TO CART</span>
                            </button>
                        </div>
                    </div>
                `;
                productList.insertAdjacentHTML('beforeend', cardHTML);
            });
        }

        function filterProducts() {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedEquipment = filterEquipment.value;
            const selectedBrand = filterBrand.value;

            const filteredProducts = productsData.filter(product => {
                const partName = product.name.toLowerCase();
                const partDetails = product.partNo.toLowerCase();
                
                // 1. Search Logic
                const matchesSearch = partName.includes(searchTerm) || partDetails.includes(searchTerm);

                // 2. Filter Logic
                const matchesEquipment = selectedEquipment === 'all' || product.type === selectedEquipment;
                const matchesBrand = selectedBrand === 'all' || product.brand === selectedBrand;

                return matchesSearch && matchesEquipment && matchesBrand;
            });

            renderProducts(filteredProducts);
        }

        // --- INITIALIZATION & EVENT LISTENERS (NO CHANGE) ---
        document.addEventListener('DOMContentLoaded', () => {
            // Initial render
            filterProducts(); 
            updateCartIcon();

            // Filter Event Listeners
            searchInput.addEventListener('input', filterProducts);
            filterEquipment.addEventListener('change', filterProducts);
            filterBrand.addEventListener('change', filterProducts);
            
            // Cart Event Listeners
            document.getElementById('open-cart-btn').addEventListener('click', () => {
                cartModalOverlay.style.display = 'flex';
                renderCart();
            });
            document.getElementById('close-cart-btn').addEventListener('click', () => {
                cartModalOverlay.style.display = 'none';
            });
            // Close modal when clicking outside content
            cartModalOverlay.addEventListener('click', (e) => {
                if (e.target.id === 'cart-modal-overlay') {
                    cartModalOverlay.style.display = 'none';
                }
            });

            // Checkout Event Listener
            checkoutWhatsappBtn.addEventListener('click', generateWhatsAppMessage);
        });
    </script>
</body>
